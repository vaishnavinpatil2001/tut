Utility function of version 1